From bfa175319b60e7e313326857c216ef58db698999 Mon Sep 17 00:00:00 2001
From: Sven Neumann <s.neumann@raumfeld.com>
Date: Fri, 7 Dec 2012 11:48:55 +0100
Subject: [PATCH] Fix removal of variable change notifications
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Need to pass the key to g_hash_table_remove(), not the
value. This fixes crashes in emit_notification().

Signed-off-by: Sven Neumann <s.neumann@raumfeld.com>
Reviewed-by: Henry HÃ¶gelow <h.hoegelow@raumfeld.com>
---
 libgupnp/gupnp-service-proxy.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/libgupnp/gupnp-service-proxy.c b/libgupnp/gupnp-service-proxy.c
index 4236965..0cd724f 100644
--- a/libgupnp/gupnp-service-proxy.c
+++ b/libgupnp/gupnp-service-proxy.c
@@ -1572,7 +1572,7 @@ gupnp_service_proxy_remove_notify (GUPnPServiceProxy              *proxy,
                         if (data->callbacks == NULL) {
                                 /* No callbacks left: Remove from hash */
                                 g_hash_table_remove (proxy->priv->notify_hash,
-                                                     data);
+                                                     variable);
                         }
 
                         found = TRUE;
-- 
1.7.10.4

