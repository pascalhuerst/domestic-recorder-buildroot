From a54a2a055ccaf04a618e428a777c71f901626143 Mon Sep 17 00:00:00 2001
From: Max Blagay <max.blagaj@gmail.com>
Date: Mon, 20 Oct 2014 17:41:06 +0200
Subject: [PATCH] ignore-empty-frames-instead-of-failing

---
 taglib/mpeg/id3v2/id3v2tag.cpp | 15 +++++----------
 1 file changed, 5 insertions(+), 10 deletions(-)

diff --git a/taglib/mpeg/id3v2/id3v2tag.cpp b/taglib/mpeg/id3v2/id3v2tag.cpp
index 57637a3..df4e325 100644
--- a/taglib/mpeg/id3v2/id3v2tag.cpp
+++ b/taglib/mpeg/id3v2/id3v2tag.cpp
@@ -699,18 +699,13 @@ void ID3v2::Tag::parse(const ByteVector &origData)
     Frame *frame = d->factory->createFrame(data.mid(frameDataPosition),
                                            &d->header);
 
-    if(!frame)
-      return;
-
-    // Checks to make sure that frame parsed correctly.
-
-    if(frame->size() <= 0) {
-      delete frame;
-      return;
+    if(frame)
+    {
+      frameDataPosition += frame->size();
+      addFrame(frame);
     }
 
-    frameDataPosition += frame->size() + Frame::headerSize(d->header.majorVersion());
-    addFrame(frame);
+    frameDataPosition += Frame::headerSize(d->header.majorVersion());
   }
 }
 
-- 
1.9.1

