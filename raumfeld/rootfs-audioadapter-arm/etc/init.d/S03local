#!/bin/sh

# Mount all partitions listed in /etc/fstab
mount -a

# Set the MAC address of eth0
eval $(fw_printenv ethaddr)
test -z "$ethaddr" || /sbin/ifconfig eth0 hw ether $ethaddr

# reduce scheduler priority of the eth0 IRQ handler
chrt -f -p 40 $(ps | awk '/\[irq\/136-eth\%d\]/ {print $1}') 

# tune RT scheduler period and runtime
echo "30000" > /proc/sys/kernel/sched_rt_period_us
echo "25000" > /proc/sys/kernel/sched_rt_runtime_us
